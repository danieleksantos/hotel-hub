paths:
  /bookings:
    get:
      summary: Lista todas as reservas
      description: Retorna a lista de reservas com dados do hotel (nome, foto) e do usuário populados.
      tags: [Bookings]
      security:
        - bearerAuth: []
      responses:
        200:
          description: Lista recuperada com sucesso
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Booking'
    
    post:
      summary: Criar nova reserva
      description: Cria uma reserva validando disponibilidade de quartos e existência do hotel.
      tags: [Bookings]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [hotel_id, start_date, end_date, responsible_name]
              properties:
                hotel_id:
                  type: string
                  format: uuid
                  description: "ID do Hotel (UUID)"
                start_date:
                  type: string
                  format: date
                  description: "Data de Check-in (YYYY-MM-DD)"
                  example: "2026-02-15"
                end_date:
                  type: string
                  format: date
                  description: "Data de Check-out (YYYY-MM-DD)"
                  example: "2026-02-20"
                responsible_name:
                  type: string
                  description: "Nome do responsável principal"
                  example: "Carlos Almeida"
      responses:
        201:
          description: Reserva criada com sucesso
        400:
          description: Dados inválidos (datas erradas ou campos faltando)
        401:
          description: Não autorizado (Token ausente ou inválido)
        404:
          description: Hotel não encontrado
        409:
          description: Conflito - Não há quartos disponíveis para este período

  /bookings/{id}:
    parameters:
      - name: id
        in: path
        required: true
        description: ID da reserva (UUID)
        schema:
          type: string
          format: uuid

    put:
      summary: Atualizar reserva existente
      description: Atualiza os dados da estadia ou o responsável.
      tags: [Bookings]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                hotel_id:
                  type: string
                  format: uuid
                start_date:
                  type: string
                  format: date
                end_date:
                  type: string
                  format: date
                responsible_name:
                  type: string
              example:
                hotel_id: "00000000-0000-0000-0000-000000000000"
                start_date: "2026-03-01"
                end_date: "2026-03-05"
                responsible_name: "Carlos Almeida Atualizado"
      responses:
        200:
          description: Reserva atualizada com sucesso
        404:
          description: Reserva não encontrada
        401:
          description: Não autorizado

    delete:
      summary: Cancelar/Remover reserva
      description: Remove a reserva de forma definitiva.
      tags: [Bookings]
      security:
        - bearerAuth: []
      responses:
        204:
          description: Reserva removida com sucesso (No Content)
        404:
          description: Reserva não encontrada
        401:
          description: Não autorizado